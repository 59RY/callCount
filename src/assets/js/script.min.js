/**
 * script.min.js
 * @version	1.0
 * @see		https://i.y59.jp/Johnny's/callCount/assets/js/script.js
 * @author	yuta*ﾟ {@link https://y59.jp/}
**/
function getCookie(e){var t=document.cookie,n="",a="",o="";return t.length>0?(n=t.indexOf(e+"="),-1!==n&&(n+=parseInt(e.length+1),a=t.indexOf(";",n),-1===a&&(a=t.length),o=unescape(t.substring(n,a)))):o="",o}function setCookie(e,t,n){var a=location.pathname,o=[];o=a.split("/"),""!==o[o.length-1]&&(o[o.length-1]="",a=o.join("/"));var r=(new Date).getTime(),c=new Date(r+864e5*n),i=c.toUTCString(),u="";u+=e+"="+escape(t),u+="; path="+a,u+=n?"; expires="+i+"; ":"; ",document.cookie=u}function insertComma(e){var t="";if("undefined"!=typeof e){for(e=String(e),e=halfWidthPlus(e),e=String(parseFloat(e));e!==(t=e.replace(/^([+-]?\d+)(\d\d\d)/,"$1,$2"));)e=t;return e}}function halfWidthPlus(e){return e.replace(/[Ａ-ｚ０-９]/g,function(e){return String.fromCharCode(e.charCodeAt(0)-65248)}).replace(/(,|，|､|、|\ |\　)/g,"").replace(/．/g,".").replace(/\‐\-\‑\—/g,"-")}function counterSet(e,t){var n,a=parseInt($("#callValue").attr("data-value"));return n=t?a+e:e,n>=0?(counterAffect(n),setCookie("callCount_value",n,731),n):void 0}function counterAffect(e){$("#callValue").attr("data-value",String(e)).html(insertComma(e));var t=$(".outWent");parseInt(e)>=1?t.show():t.hide()}var callTo="0570000058";$(function(e){var t="ontouchend"in document,n=t?"touchstart":"mousedown",a=getCookie("callCount_value");""!==a&&"undefined"!=typeof a&&counterAffect(a),$(e).on(n,".callButton",function(){location.href="tel:"+callTo,counterSet(1,!0)}),$(e).on(n,".adjust",function(){var e=$(this).attr("data-count");switch(e){case"+1":counterSet(1,!0);break;case"-1":counterSet(-1,!0);break;case"custom":var t=window.prompt("電話をかけた回数を半角で入力してください",parseInt($("#callValue").attr("data-value")));if("undefined"!=typeof t&&""!==t&&null!==t){t=halfWidthPlus(t);var n=parseInt(t);t===String(n)?t>=0?counterSet(t,!1):alert("注：0 以上の数字を入力してください。"):alert("注：正しい数字を入力してください。")}break;case"reset":window.confirm("電話カウンターをリセットしてもよろしいですか?")&&counterSet(0,!1)}}),$(e).on(n,".outWent",function(){if(window.confirm("当落確認が出来ましたか?")){setCookie("callCount_value","0",-1);var e=$(".notConnected"),t=$(".connected");e.addClass("fadeout"),setTimeout(function(){e.hide(),t.addClass("fadein")},500),setTimeout(function(){t.show()},1e3)}}),$(e).on(n,".share",function(){var e=$(this).attr("data-shareto"),t=$("#callValue").attr("data-value"),n=location.href,a=encodeURI("ジャニーズ当落電話カウンター! 私は"+insertComma(t)+"回で繋がりました٩(๑^o^๑)۶"),o=encodeURI("当落電話カウンター"),r="";switch(e){case"twitter":r="https://twitter.com/share?via=y59JP&text="+a+"&url="+n+"&hashtags="+o+"&lang=ja";break;case"facebook":r="https://www.facebook.com/sharer.php?u="+n;break;case"line":r="line://msg/text/"+a+"%0D%0A"+encodeURI(n)}""!==r&&window.open(r,"_blank")})}($(document)));
